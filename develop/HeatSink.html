<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Feel++: Heat Sink</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="feel.css"   rel="stylesheet" type="text/css" />
<link href="feel.css" rel="stylesheet" type="text/css">
<!--  -->
<script type="text/javascript" src="eigen_navtree_hacks.js"></script>
<!-- <script type="text/javascript"> -->
<!-- </script> -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- <a name="top"></a> -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
    <div id="projectname"><a href="http://www.feelpp.org/"><img alt="Logo" src="feel_logo_small.png"/></a>
   &#160;<span id="projectnumber">0.96.0-alpha.1+gita6c957c</span>
   </div>
   <div id="projectbrief">Finite Element Embedded Library and Language in C++</div>
  </td>
  <td width="500px" align="center" valign="bottom">
    <a href="http://www.feelpp.org/"><img alt="Feel++" src="home.png"/></a>
    <a href="https://github.com/feelpp/feelpp"><img alt="Feel++ on Github" src="http://sciactive.github.io/pnotify/includes/github-icon.png"/></a>
    <a href="https://plus.google.com/communities/104696212880173187475"><img alt="Feel++ community" src="google.png"/></a>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('HeatSink.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Heat Sink </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#HeatSink_Description">Description</a><ul><li class="level2"><a href="#Description_Domain">Domain</a></li>
<li class="level2"><a href="#Description_Inputs">Inputs</a><ul><li class="level3"><a href="#Inputs_Material">Material</a></li>
<li class="level3"><a href="#Inputs_Physical">Physical</a></li>
<li class="level3"><a href="#Inputs_Thermal">Thermal</a></li>
<li class="level3"><a href="#Inputs_Summary">Summary table</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#HeatSink_Theory">Theory</a><ul><li class="level2"><a href="#Theory_Figure">Figure</a></li>
<li class="level2"><a href="#Theory_Equations">Equations</a></li>
<li class="level2"><a href="#Theory_Boundary">Boundary Conditions</a></li>
<li class="level2"><a href="#Theory_FEM">Finite Element Method</a></li>
</ul>
</li>
<li class="level1"><a href="#HeatSink_Implementation">Implementation</a><ul><li class="level2"><a href="#Implementation_Parameters">Application Parameters</a></li>
<li class="level2"><a href="#Implementation_Surfaces">Surfaces</a></li>
<li class="level2"><a href="#Implementation_Equations">Equations</a></li>
</ul>
</li>
<li class="level1"><a href="#HeatSink_Results">Results</a><ul><li class="level2"><a href="#Results_How">How to use it ?</a></li>
<li class="level2"><a href="#Results_Figures">Figures</a><ul><li class="level3"><a href="#Results_2D">2D cases</a></li>
<li class="level3"><a href="#Results_3D">3D cases</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Christophe Prud'homme </dd>
<dd>
Baptiste Morin </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2011-06-28</dd></dl>
<p><br/>
 </p>
<hr/>
<p> <br/>
</p>
<p>This problem considers the performance of a heat sink designed for the thermal management of high-density electronic components. The heat sink is comprised of a base/spreader which in turn supports a number of plate fins exposed to flowing air. We model the flowing air through a simple convection heat transfer coefficient. From the engineering point of view, this problem illustrates the application of conduction analysis to an important class of cooling problems: electronic components and systems. <br/>
 <br/>
 Our interest is in the conduction temperature distribution at the base of the spreader. The target is to study how the heat transfer occures with different parameters on our heat sink. The heat generated by high-density electronic components is such that it's very expensive to cool large structures (data center). The cooling optimization is consequent in the run for decreasing operating costs.</p>
<p>A classical thermal CPU cooler looks like this </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="complete_cooler.png" alt="complete_cooler.png"/>
</div>
  </td></tr>
<tr>
<td><center><a class="el" href="classFeel_1_1Mesh.html" title="unifying mesh class ">Mesh</a> of a classical CPU cooler</center>  </td></tr>
</table>
</center><p>We are here going to describe how it is theorically working and how it is impleted with <a href="http://www.feelpp.org">Feel++</a>.</p>
<h1><a class="anchor" id="HeatSink_Description"></a>
Description</h1>
<h2><a class="anchor" id="Description_Domain"></a>
Domain</h2>
<p>We consider here a classical "radiator" which is a CPU heat sink. Those types of coolers are composed with a certain number of plate fins exposed to flowing air or exposed to a ventilator. Regarding the periodicity and geometry of our concern, we can make our study on a characteristic element of the problem : a half cell of the heat sink single thermal fin with its spreader at the basis. Let's take a look at the geometry of our problem : </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="sink_geom.png" alt="sink_geom.png"/>
</div>
  </td></tr>
<tr>
<td><center>Geometry of heat sink</center>  </td></tr>
</table>
</center><p>Our study is avaible in 2 or 3 dimensions, depending on the application's parameters. You'll see later how to work with it. Let's see on which meshes we are working on : </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="mesh_2d.png" alt="mesh_2d.png"/>
</div>
 </td><td><div class="image">
<img src="mesh_3d.png" alt="mesh_3d.png"/>
</div>
  </td></tr>
<tr>
<td><center>2D mesh</center> </td><td><center>3D mesh</center>  </td></tr>
</table>
</center><h2><a class="anchor" id="Description_Inputs"></a>
Inputs</h2>
<p>The implementation of thoses parameters is described in the section <a class="el" href="HeatSink.html#Implementation_Parameters">Application Parameters</a>.<br/>
 </p>
<h3><a class="anchor" id="Inputs_Material"></a>
Material</h3>
<p>Here the material parameter can be described with furthers parameters. We have, with <img class="formulaInl" alt="$i=1$" src="form_302.png"/> for the fin and <img class="formulaInl" alt="$i=2$" src="form_303.png"/> for the base : </p>
<ul>
<li>the thermal conductivity <img class="formulaInl" alt="$\kappa_i$" src="form_304.png"/> </li>
<li>the material's density <img class="formulaInl" alt="$\rho_i$" src="form_305.png"/> </li>
<li>the heat capacity of the material <img class="formulaInl" alt="$C_i$" src="form_306.png"/></li>
</ul>
<p>The term <img class="formulaInl" alt="$\rho_i C_i$" src="form_307.png"/> corresponds to the heat volumetric capacity. In that way, we make possible the construction of a heat sink with <img class="formulaInl" alt="$2$" src="form_308.png"/> different materials. Here is a list of the well-known ones, <img class="formulaInl" alt="$\rho$" src="form_309.png"/> and <img class="formulaInl" alt="$C$" src="form_310.png"/> are gave at <img class="formulaInl" alt="$298 K$" src="form_311.png"/> : </p>
<table  class="manual">
<tr>
<th><a class="el" href="classFeel_1_1Material.html" title="Material base class. ">Material</a></th><th>Thermal conductivity<br/>
 <img class="formulaInl" alt="$\kappa$ in $W.m^{-1}.K^{-1}$" src="form_312.png"/></th><th>Density<br/>
 <img class="formulaInl" alt="$\rho$ in $kg.m^{-3}$" src="form_313.png"/></th><th>Heat Capacity <br/>
 <img class="formulaInl" alt="$C$" src="form_310.png"/> in <img class="formulaInl" alt="$J.kg^{-1}.K^{-1}$" src="form_314.png"/> </th></tr>
<tr>
<td>Aluminium </td><td>180 (alloys)<br/>
 or 290 (pure) </td><td>2700 </td><td>897  </td></tr>
<tr>
<td>Copper </td><td>386 </td><td>8940 </td><td>385  </td></tr>
<tr>
<td>Gold </td><td>314 </td><td>19320 </td><td>129  </td></tr>
<tr>
<td>Silver </td><td>406 </td><td>10500 </td><td>233  </td></tr>
</table>
<h3><a class="anchor" id="Inputs_Physical"></a>
Physical</h3>
<ul>
<li>Depth<br/>
 This parameter is only to take into account for the 3D simulation. It represents the depth of the caracteristical heat sink and is called <code>depth</code> in the application. </li>
<li>Length<br/>
 You can also parameterize the length of the fin. This one is called <code>L</code> in the application's parameters, its dimension is the meter. </li>
<li>Width<br/>
 Typically, this parameter is linked with constructor's standards. This parameter is called <code>width</code> in the application's implementation.</li>
</ul>
<h3><a class="anchor" id="Inputs_Thermal"></a>
Thermal</h3>
<ul>
<li>Heat flux<br/>
 It represents the heat flux brought by the electronic component at the bottom of the base. Here it's typically the heat brought by the processor. </li>
<li>Thermal coefficient<br/>
 The thermal coefficient <img class="formulaInl" alt="$h$" src="form_315.png"/> named <img class="formulaInl" alt="$therm_coeff$" src="form_316.png"/> in the application is representative of the heat transfer between the fin and the air flow. </li>
<li>Ambien temperature}<br/>
 This parameter called <img class="formulaInl" alt="$T_{amb}$" src="form_317.png"/> represents the temperature around the heat sink at the beginning. That means the ambient temperature before the computer is turned on.</li>
</ul>
<h3><a class="anchor" id="Inputs_Summary"></a>
Summary table</h3>
<p>The following table displays the various fixed and variables parameters of this application. </p>
<table  class="manual">
<tr>
<th>Name </th><th>Description </th><th>Nominal Value </th><th>Range </th><th>Units </th></tr>
<tr>
<th>BDF parameters  </th></tr>
<tr>
<td><img class="formulaInl" alt="$time-initial$" src="form_318.png"/> </td><td>begining </td><td><img class="formulaInl" alt="$0$" src="form_319.png"/> </td><td></td><td></td></tr>
<tr>
<td><img class="formulaInl" alt="$time-final$" src="form_320.png"/> </td><td>end </td><td><img class="formulaInl" alt="$50$" src="form_321.png"/> </td><td><img class="formulaInl" alt="$]0, 1500]$" src="form_322.png"/> </td><td></td></tr>
<tr>
<td><img class="formulaInl" alt="$time-step$" src="form_323.png"/> </td><td>time step </td><td><img class="formulaInl" alt="$0.1$" src="form_324.png"/> </td><td><img class="formulaInl" alt="$]0,1[$" src="form_325.png"/> </td><td></td></tr>
<tr>
<td><img class="formulaInl" alt="$steady$" src="form_326.png"/> </td><td>steady state </td><td><img class="formulaInl" alt="$0$" src="form_319.png"/> </td><td><img class="formulaInl" alt="$\{0,1\}$" src="form_327.png"/> </td><td></td></tr>
<tr>
<td><img class="formulaInl" alt="$order$" src="form_328.png"/> </td><td>order </td><td><img class="formulaInl" alt="$2$" src="form_308.png"/> </td><td><img class="formulaInl" alt="$[0, 4]$" src="form_329.png"/> </td><td></td></tr>
<tr>
<th>Physical parameters  </th></tr>
<tr>
<td><img class="formulaInl" alt="$L$" src="form_330.png"/> </td><td>fin's length </td><td><img class="formulaInl" alt="$2\cdot 10^{-2}$" src="form_331.png"/> </td><td><img class="formulaInl" alt="$[0.02, 0.05]$" src="form_332.png"/> </td><td><img class="formulaInl" alt="$m$" src="form_333.png"/>  </td></tr>
<tr>
<td><img class="formulaInl" alt="$width$" src="form_334.png"/> </td><td>fin's width </td><td><img class="formulaInl" alt="$5\cdot 10^{-4}$" src="form_335.png"/> </td><td><img class="formulaInl" alt="$[10^{-5}, 10^{-4}]$" src="form_336.png"/> </td><td><img class="formulaInl" alt="$m$" src="form_333.png"/>  </td></tr>
<tr>
<td><img class="formulaInl" alt="$deep$" src="form_337.png"/> </td><td>heat sink depth </td><td><img class="formulaInl" alt="$0$" src="form_319.png"/> </td><td><img class="formulaInl" alt="$[0, 7\cdot 10^{-2}]$" src="form_338.png"/> </td><td><img class="formulaInl" alt="$m$" src="form_333.png"/>  </td></tr>
<tr>
<th><a class="el" href="classFeel_1_1Mesh.html" title="unifying mesh class ">Mesh</a> parameter  </th></tr>
<tr>
<td><img class="formulaInl" alt="$hsize$" src="form_339.png"/> </td><td>mesh's size </td><td><img class="formulaInl" alt="$10^{-4}$" src="form_340.png"/> </td><td><img class="formulaInl" alt="$[10^{-5},10^{-3} ]$" src="form_341.png"/> </td><td></td></tr>
<tr>
<th>Fin Parameters  </th></tr>
<tr>
<td><img class="formulaInl" alt="$\kappa_f$" src="form_342.png"/> </td><td>thermal conductivity </td><td><img class="formulaInl" alt="$386$" src="form_343.png"/> </td><td><img class="formulaInl" alt="$[100,500]$" src="form_344.png"/> </td><td><img class="formulaInl" alt="$W \cdot m^{-1} \cdot K^{-1}$" src="form_345.png"/> </td></tr>
<tr>
<td><img class="formulaInl" alt="$\rho_f$" src="form_346.png"/> </td><td>material density </td><td><img class="formulaInl" alt="$8940$" src="form_347.png"/> </td><td><img class="formulaInl" alt="$[10^3,12\cdot 10^3 ]$" src="form_348.png"/> </td><td><img class="formulaInl" alt="$kg\cdot m^{-3}$" src="form_349.png"/> </td></tr>
<tr>
<td><img class="formulaInl" alt="$C_f$" src="form_350.png"/> </td><td>heat capacity </td><td><img class="formulaInl" alt="$385$" src="form_351.png"/> </td><td><img class="formulaInl" alt="$[10^2,10^3]$" src="form_352.png"/> </td><td><img class="formulaInl" alt="$J\cdot kg^{-1} \cdot K^{-1}$" src="form_353.png"/> </td></tr>
<tr>
<th>Base/spreader Parameters  </th></tr>
<tr>
<td><img class="formulaInl" alt="$\kappa_s$" src="form_354.png"/> </td><td>thermal conductivity </td><td><img class="formulaInl" alt="$386$" src="form_343.png"/> </td><td><img class="formulaInl" alt="$[100,500]$" src="form_344.png"/> </td><td><img class="formulaInl" alt="$W \cdot m^{-1} \cdot K^{-1}$" src="form_345.png"/> </td></tr>
<tr>
<td><img class="formulaInl" alt="$\rho_s$" src="form_355.png"/> </td><td>material density </td><td><img class="formulaInl" alt="$8940$" src="form_347.png"/> </td><td><img class="formulaInl" alt="$[10^3,12\cdot 10^3 ]$" src="form_348.png"/> </td><td><img class="formulaInl" alt="$kg\cdot m^{-3}$" src="form_349.png"/> </td></tr>
<tr>
<td><img class="formulaInl" alt="$C_s$" src="form_356.png"/> </td><td>heat capacity </td><td><img class="formulaInl" alt="$385$" src="form_351.png"/> </td><td><img class="formulaInl" alt="$[10^2,10^3]$" src="form_352.png"/> </td><td><img class="formulaInl" alt="$J\cdot kg^{-1} \cdot K^{-1}$" src="form_353.png"/> </td></tr>
<tr>
<th>Heat Parameters  </th></tr>
<tr>
<td><img class="formulaInl" alt="$T_{amb}$" src="form_317.png"/> </td><td>ambient temperature </td><td><img class="formulaInl" alt="$300$" src="form_357.png"/> </td><td><img class="formulaInl" alt="$[300,310]$" src="form_358.png"/> </td><td><img class="formulaInl" alt="$K$" src="form_359.png"/>  </td></tr>
<tr>
<td><img class="formulaInl" alt="$heat\_flux$" src="form_360.png"/> </td><td>heat flux <img class="formulaInl" alt="$Q$" src="form_361.png"/> </td><td><img class="formulaInl" alt="$10^6$" src="form_362.png"/> </td><td><img class="formulaInl" alt="$[0 ,10^{6}]$" src="form_363.png"/> </td><td><img class="formulaInl" alt="$W \cdot m^{-3}$" src="form_364.png"/> </td></tr>
<tr>
<td><img class="formulaInl" alt="$therm\_coeff$" src="form_365.png"/> </td><td>thermal coefficient <img class="formulaInl" alt="$h$" src="form_315.png"/> </td><td><img class="formulaInl" alt="$10^3$" src="form_366.png"/> </td><td><img class="formulaInl" alt="$[0,10^3]$" src="form_367.png"/> </td><td><img class="formulaInl" alt="$W\cdot m^{-2} \cdot K^{-1}$" src="form_368.png"/>  </td></tr>
</table>
<h1><a class="anchor" id="HeatSink_Theory"></a>
Theory</h1>
<h2><a class="anchor" id="Theory_Figure"></a>
Figure</h2>
<p>The global domain is <img class="formulaInl" alt="$\varOmega = \varOmega_1 \cup \varOmega_2 $" src="form_369.png"/> where <img class="formulaInl" alt="$\varOmega_1$" src="form_370.png"/> is the fin's domain and <img class="formulaInl" alt="$\varOmega_2$" src="form_371.png"/> the spreader's domain. We note <img class="formulaInl" alt="$\partial\varOmega$" src="form_372.png"/> the border of the domain <img class="formulaInl" alt="$\varOmega$" src="form_373.png"/>. The physical lines we are using will be noted as <img class="formulaInl" alt="$\Gamma_i$" src="form_374.png"/> such as described above. The following figure describes the parameters and the geometry we are using in the equations to solve our 3D issue : The following figures describe the parameters and the geometry we are using in the equations to solve our 2D or 3D issue : </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="figure_2d.png" alt="figure_2d.png"/>
</div>
 </td><td><div class="image">
<img src="figure_3d.png" alt="figure_3d.png"/>
</div>
  </td></tr>
<tr>
<td><center>2D geometry details</center> </td><td><center>3D geometry details</center>  </td></tr>
</table>
</center><h2><a class="anchor" id="Theory_Equations"></a>
Equations</h2>
<p>Our concern satisfies the heat equation which reads </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray} \sum_{i=1}^{2} \kappa_i \Delta T - \rho_i C_i \frac{ \partial T}{\partial t} &amp; =&amp; 0&amp; \\ \kappa_1 \frac{\partial T}{\partial n} &amp;= &amp; 0 &amp; \text{on } \Gamma_2 \text{ and } \Gamma_6\quad\quad \\ \kappa_2 \frac{\partial T}{\partial n} &amp;= &amp; 0 &amp; \text{on } \Gamma_5 , \Gamma_7 \text{ and } \Gamma_8\quad\quad \\ \kappa_1 \frac{\partial T}{\partial n} &amp;= &amp;- h( T - T_{amb}) &amp; \text{on } \Gamma_1\quad\quad \\ \kappa_2 \frac{\partial T}{\partial n} &amp;= &amp; Q(1-e^{-t}) &amp; \text{on } \Gamma_4\quad\quad \\ T_{|\varOmega_1} &amp;= &amp;T_{| \varOmega_2} &amp; \text{on } \Gamma_3\quad\quad \\ \kappa_1 \nabla T \cdot n &amp;=&amp; \kappa_2 \nabla T \cdot n &amp; \text{on } \Gamma_3\quad\quad \end{eqnarray}" src="form_375.png"/>
</p>
<p> with <img class="formulaInl" alt="$i=1$" src="form_302.png"/> for the fin and <img class="formulaInl" alt="$i=2$" src="form_303.png"/> for the base and where <img class="formulaInl" alt="$\kappa_i$" src="form_304.png"/> is the thermal conductivity, <img class="formulaInl" alt="$\rho_i$" src="form_305.png"/> is the material's density ( <img class="formulaInl" alt="$kg.m^{-3}$" src="form_376.png"/> in the SI unit), <img class="formulaInl" alt="$C_i$" src="form_306.png"/> the heat capacity and <img class="formulaInl" alt="$T$" src="form_377.png"/> the temperature at a precise point (in 2D or 3D). To see how it has been coded, you can read Implemtation .</p>
<h2><a class="anchor" id="Theory_Boundary"></a>
Boundary Conditions</h2>
<p>The problem requieres that the temperature and heat flux are continute on <img class="formulaInl" alt="$\Gamma_3$" src="form_378.png"/>. Considering the problem's geometry, we also impose zero heat flux on the vertical surfaces of the spreader. Let's detail the conditions we have imposed : </p>
<ul>
<li>Homogeneous Neumann condition ( <img class="formulaInl" alt="$(2)$" src="form_265.png"/> ) and ( <img class="formulaInl" alt="$(3)$" src="form_269.png"/> ) : it represents the fact that the heat flux is only vertical (for <img class="formulaInl" alt="$\Gamma_6$" src="form_379.png"/> and <img class="formulaInl" alt="$\Gamma_7$" src="form_380.png"/>) or the fact that the heat flux is only provided by <img class="formulaInl" alt="$\Gamma_4$" src="form_381.png"/> (for <img class="formulaInl" alt="$\Gamma_2$" src="form_382.png"/> and <img class="formulaInl" alt="$\Gamma_5$" src="form_383.png"/>). </li>
<li>Homogeneous Neumann condition ( <img class="formulaInl" alt="$(4)$" src="form_384.png"/> ) : it imposes that the heat flux is brought by this surface (it mathematically represents that the heat sink is placed on the heat source). </li>
<li>Non-homogeneous Neumann condition ( <img class="formulaInl" alt="$(5)$" src="form_385.png"/> ) : this boundary condition represents the transient state for the heat transfer calculation. </li>
<li>Temperature continuity ( <img class="formulaInl" alt="$(6)$" src="form_386.png"/> ) : it imposes that the temperature is continute at the interface between the two materials (if there are two materials, we can also have the same one for the two pieces). </li>
<li>Heat flux continuity ( <img class="formulaInl" alt="$(7)$" src="form_387.png"/> ) : it represents that the heat flux is continute at the interface between the two materials. Literally, it means that the two flows offset each other.</li>
</ul>
<p>Theses conditions have been coded as explained in the section <a class="el" href="HeatSink.html#Implementation_Equations">Equations</a>.</p>
<h2><a class="anchor" id="Theory_FEM"></a>
Finite Element Method</h2>
<p>Let's apply the method to our concern, we introduce the test function <img class="formulaInl" alt="$v$" src="form_388.png"/> and we integrate the main equation, which reads now as : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} - \kappa_i \int_{\varOmega_i} v\Delta T &amp; = 0 \end{equation*}" src="form_389.png"/>
</p>
<p> We integrate by parts, which leads to : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} - \kappa_i \int_{\partial \varOmega_i} {(\nabla T \cdot n) v} &amp; = 0 \end{equation*}" src="form_390.png"/>
</p>
<p> then, by decomposing the borders <img class="formulaInl" alt="$\partial\varOmega_i$" src="form_391.png"/>, we obtain : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{multline*} \displaystyle{- \kappa_1 \int_{\Gamma_1}{(\nabla T \cdot n) v} - \kappa_2 \int_{\Gamma_4} {(\nabla T \cdot n) v} - \kappa_1 \int_{\Gamma_{2,6}}{(\nabla T \cdot n) v} - \kappa_2 \int_{\Gamma_{5,7,8}}{(\nabla T \cdot n) v} } \quad + \\ \displaystyle{ \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} - \kappa_i \int_{\partial\varOmega_i \cap \Gamma_3}{(\nabla T \cdot n) v} } = 0 \end{multline*}" src="form_392.png"/>
</p>
<p> Now, we apply the conditions <img class="formulaInl" alt="$(2)$" src="form_265.png"/>, <img class="formulaInl" alt="$(3)$" src="form_269.png"/>, <img class="formulaInl" alt="$(4)$" src="form_384.png"/> and <img class="formulaInl" alt="$(5)$" src="form_385.png"/> which brings us to : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \int_{\Gamma_1}{hv(T-T_{amb})} - \int_{\Gamma_4} {vQ(1-e^{-t})} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} - \underbrace{\kappa_i \int_{\partial\varOmega_i \cap \Gamma_3}{(\nabla T \cdot n) v}}_{\text{=0}} &amp; = 0 \end{equation*}" src="form_393.png"/>
</p>
<p> Now we apply the boundary conditions ( <img class="formulaInl" alt="$(7)$" src="form_387.png"/> ) which results in : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \begin{split} \displaystyle{ h \int_{\Gamma_1}{v(T-T_{amb})} - \int_{\Gamma_4} {vQ(1-e^{-t})} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} } &amp; = 0 \end{split} \end{equation*}" src="form_394.png"/>
</p>
<p> We can now start to transform the equation by puting in the right hand the known terms : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \begin{split} \displaystyle{ h \int_{\Gamma_1}{v T} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{ \partial T}{\partial t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} } &amp; = \int_{\Gamma_4} {vQ(1-e^{-t})} + hT_{amb}\int_{\Gamma_1}{v} \end{split} \end{equation*}" src="form_395.png"/>
</p>
<p> We discretize <img class="formulaInl" alt="$\displaystyle{\frac{\partial T}{\partial t}}$" src="form_396.png"/> where <img class="formulaInl" alt="$\delta t$" src="form_397.png"/> is the time step, such as: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \begin{split} \displaystyle{ h \int_{\Gamma_1}{v T} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{T^{n+1} - T^n}{\delta t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T} } &amp; = \int_{\Gamma_4} {vQ(1-e^{-t})} + hT_{amb}\int_{\Gamma_1}{v} \end{split} \end{equation*}" src="form_398.png"/>
</p>
<p> Finally we obtain : </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{equation*} \color{red} \begin{split} \displaystyle{ h \int_{\Gamma_1}{v T} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v\frac{T^{n+1}}{\delta t} + \kappa_i \int_{\varOmega_i} {\nabla v \cdot \nabla T}} &amp; = \displaystyle{ \int_{\Gamma_4} {vQ(1-e^{-t})} + hT_{amb}\int_{\Gamma_1}{v} + \sum_{i=1}^{2} \rho_i C_i \int_{\varOmega_i} v \frac{T^n}{\delta t} } \end{split} \end{equation*}" src="form_399.png"/>
</p>
<p> This is that equation which is implemented in the application <code>feel_heatsink</code>.</p>
<h1><a class="anchor" id="HeatSink_Implementation"></a>
Implementation</h1>
<h2><a class="anchor" id="Implementation_Parameters"></a>
Application Parameters</h2>
<p>The parameters of the application are implemented such as </p>
<div class="fragment"><div class="line"><span class="keyword">inline</span></div>
<div class="line">Feel::po::options_description</div>
<div class="line"><a class="code" href="namespaceFeel.html#a846e3404cb41fc1eb5bcd4b2db85f687">makeOptions</a>()</div>
<div class="line">{</div>
<div class="line">    Feel::po::options_description heatsinkoptions( <span class="stringliteral">&quot;heatsink options&quot;</span> );</div>
<div class="line">    heatsinkoptions.add_options()</div>
<div class="line">    <span class="comment">// mesh parameters</span></div>
<div class="line">    ( <span class="stringliteral">&quot;hsize&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 0.0001 ),</div>
<div class="line">      <span class="stringliteral">&quot;first h value to start convergence&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;L&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 0.02 ),</div>
<div class="line">      <span class="stringliteral">&quot;dimensional length of the sink (in meters)&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;width&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 0.0005 ),</div>
<div class="line">      <span class="stringliteral">&quot;dimensional width of the fin (in meters)&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 3D parameter</span></div>
<div class="line">    ( <span class="stringliteral">&quot;deep&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 0 ),</div>
<div class="line">      <span class="stringliteral">&quot;depth of the mesh (in meters) only in 3D simulation&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// thermal conductivities parameters</span></div>
<div class="line">    ( <span class="stringliteral">&quot;kappa_s&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 386 ),</div>
<div class="line">      <span class="stringliteral">&quot;thermal conductivity of the base spreader in SI unit W.m^{-1}.K^{-1}&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;kappa_f&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 386 ),</div>
<div class="line">      <span class="stringliteral">&quot;thermal conductivity of the fin in SI unit W.m^{-1}.K^{-1}&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// density parameter</span></div>
<div class="line">    ( <span class="stringliteral">&quot;rho_s&quot;</span>, Feel::po::value&lt;int&gt;()-&gt;default_value( 8940 ),</div>
<div class="line">      <span class="stringliteral">&quot;density of the spreader&#39;s material in SI unit kg.m^{-3}&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;rho_f&quot;</span>, Feel::po::value&lt;int&gt;()-&gt;default_value( 8940 ),</div>
<div class="line">      <span class="stringliteral">&quot;density of the fin&#39;s material in SI unit kg.m^{-3}&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// heat capacities parameter</span></div>
<div class="line">    ( <span class="stringliteral">&quot;c_s&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 385 ),</div>
<div class="line">      <span class="stringliteral">&quot;heat capacity of the spreader&#39;s material in SI unit J.kg^{-1}.K^{-1}&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;c_f&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 385 ),</div>
<div class="line">      <span class="stringliteral">&quot;heat capacity of the fin&#39;s material in SI unit J.kg^{-1}.K^{-1}&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// physical coeff</span></div>
<div class="line">    ( <span class="stringliteral">&quot;therm_coeff&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 1e3 ),</div>
<div class="line">      <span class="stringliteral">&quot;thermal coefficient&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;Tamb&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 300 ),</div>
<div class="line">      <span class="stringliteral">&quot;ambiant temperature&quot;</span> )</div>
<div class="line">    ( <span class="stringliteral">&quot;heat_flux&quot;</span>, Feel::po::value&lt;double&gt;()-&gt;default_value( 1e6 ),</div>
<div class="line">      <span class="stringliteral">&quot;heat flux generated by CPU&quot;</span> )</div>
<div class="line"></div>
<div class="line">    ( <span class="stringliteral">&quot;steady&quot;</span>, Feel::po::value&lt;bool&gt;()-&gt;default_value( <span class="keyword">false</span> ),</div>
<div class="line">      <span class="stringliteral">&quot;if true : steady else unsteady&quot;</span> )</div>
<div class="line"></div>
<div class="line">    <span class="comment">// export</span></div>
<div class="line">    ( <span class="stringliteral">&quot;export-matlab&quot;</span>, <span class="stringliteral">&quot;export matrix and vectors in matlab&quot;</span> );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> heatsinkoptions.add( Feel::feel_options() );</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="Implementation_Surfaces"></a>
Surfaces</h2>
<p>To be able to calculate the surfaces in further dimension without changing the code, we have given the same names for the faces we were interested in. In 2D <img class="formulaInl" alt="$\Gamma_i$" src="form_374.png"/> represents a line whereas in 3D it represents a surface. The calculation of those surfaces which makes possible the calculation of averages temperature is as follow : </p>
<div class="fragment"><div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Calculate the two surfaces used for averages calculation</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    surface_base = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh, <span class="stringliteral">&quot;gamma4&quot;</span> ), _expr= cst( 1. ) ).evaluate()( 0,0 );</div>
<div class="line">    surface_fin = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh,<span class="stringliteral">&quot;gamma1&quot;</span> ), _expr=cst( 1. ) ).evaluate()( 0,0 );</div>
</div><!-- fragment --> <h2><a class="anchor" id="Implementation_Equations"></a>
Equations</h2>
<p>First we start by calculate the non-steady state which means that we integrate all the time-independant terms, which is done with : </p>
<div class="fragment"><div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Right hand side construction (steady state)</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">auto</span> l = form1( _test=Xh );</div>
<div class="line">    <span class="keyword">auto</span> lt = form1( _test=Xh );</div>
<div class="line">    l = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh, <span class="stringliteral">&quot;gamma1&quot;</span> ), _expr= therm_coeff*Tamb*<span class="keywordtype">id</span>( v ) );</div>
<div class="line"></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Left hand side construction (steady state)</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">auto</span> a = form2( Xh, Xh );</div>
<div class="line">    a = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh,<span class="stringliteral">&quot;spreader_mesh&quot;</span> ), _expr= kappa_s*gradt( T )*trans( grad( v ) ) );</div>
<div class="line">    a += <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh,<span class="stringliteral">&quot;fin_mesh&quot;</span> ), _expr= kappa_f*gradt( T )*trans( grad( v ) ) );</div>
<div class="line">    a += <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh, <span class="stringliteral">&quot;gamma1&quot;</span> ), _expr= therm_coeff*idt( T )*<span class="keywordtype">id</span>( v ) );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    M_bdf-&gt;start();</div>
<div class="line"></div>
<div class="line">    <span class="comment">//from now if the option &quot;steady&quot; is set to true then M_bdf-&gt;setSteady will set time-step=time-final=1e30</span></div>
<div class="line">    <span class="keywordflow">if</span> ( steady )</div>
<div class="line">    {</div>
<div class="line">        M_bdf-&gt;setSteady();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    a +=</div>
<div class="line">        <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh, <span class="stringliteral">&quot;spreader_mesh&quot;</span> ), _expr=rho_s*c_s*idt( T )*<span class="keywordtype">id</span>( v )*M_bdf-&gt;polyDerivCoefficient( 0 ) )</div>
<div class="line">        + <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh, <span class="stringliteral">&quot;fin_mesh&quot;</span> ), _expr=rho_f*c_f*idt( T )*id( v )*M_bdf-&gt;polyDerivCoefficient( 0 ) );</div>
</div><!-- fragment --><p> Then, to compute the transient state, which means time dependant terms, you have to initialize the temperature (which is initialized as <img class="formulaInl" alt="$T_{amb}$" src="form_317.png"/> on <img class="formulaInl" alt="$X_h$" src="form_400.png"/> space) and create a new vector <img class="formulaInl" alt="$F_t$" src="form_401.png"/> which corresponds to the time dependent term. The code is as follow : </p>
<div class="fragment"><div class="line">    <span class="keywordflow">for</span> ( M_bdf-&gt;start(); M_bdf-&gt;isFinished()==<span class="keyword">false</span>; M_bdf-&gt;next() )</div>
<div class="line">    {</div>
<div class="line">        lt.zero();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// update right hand side with time dependent terms</span></div>
<div class="line">        <span class="keyword">auto</span> bdf_poly = M_bdf-&gt;polyDeriv();</div>
<div class="line">        lt =</div>
<div class="line">            <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh, <span class="stringliteral">&quot;spreader_mesh&quot;</span> ), _expr=rho_s*c_s*idv( bdf_poly )*<span class="keywordtype">id</span>( v ) ) +</div>
<div class="line">            <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#a465219e2d295ecae099f623082001ec3">markedelements</a>( mesh, <span class="stringliteral">&quot;fin_mesh&quot;</span> ), _expr=rho_f*c_f*idv( bdf_poly )*<span class="keywordtype">id</span>( v ) );</div>
<div class="line">        lt +=</div>
<div class="line">            <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range= <a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh,<span class="stringliteral">&quot;gamma4&quot;</span> ), _expr= heat_flux*( 1-math::exp( -M_bdf-&gt;time() ) )*id( v ) );</div>
<div class="line">        lt += l;</div>
<div class="line"></div>
<div class="line">        a.solve( _solution=T, _rhs=lt );</div>
<div class="line"></div>
<div class="line">        Tavg = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh,<span class="stringliteral">&quot;gamma4&quot;</span> ), _expr=( 1/surface_base )*idv( T ) ).evaluate()( 0,0 );</div>
<div class="line">        Tgamma1 = <a class="code" href="namespaceFeel.html#a4c300b4c137594540a9428af36363049" title="integrate a polynomial over a convex ">integrate</a>( _range=<a class="code" href="namespaceFeel.html#ac0d40e0852d5f0d447623caff773b1a5">markedfaces</a>( mesh,<span class="stringliteral">&quot;gamma1&quot;</span> ), _expr=( 1/surface_fin )*idv( T ) ).evaluate()( 0,0 );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// export results</span></div>
<div class="line">        out &lt;&lt; M_bdf-&gt;time() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tavg &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tgamma1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        this-&gt;exportResults( M_bdf-&gt;time(), T );</div>
<div class="line"></div>
<div class="line">    }</div>
</div><!-- fragment --><h1><a class="anchor" id="HeatSink_Results"></a>
Results</h1>
<p>As you can see in the equation's implementation above, there are two ouputs : </p>
<ul>
<li><code><a class="el" href="classFeel_1_1Gmsh.html" title="Gmsh Mesh Generator. ">Gmsh</a></code> format : this file contains the entire mesh and the temperatures associated to each degrees of freedom of the mesh. To open it, you juste have to do as you always do with <code><a class="el" href="classFeel_1_1Gmsh.html" title="Gmsh Mesh Generator. ">Gmsh</a></code> : <code>gmsh</code> heatsink-1_0.msh. You will obtain the figure with the different temperatures, you are now able to click on "play" with its significative logo and admire the evolution </li>
<li><code>averages</code> file : this file is completed at each time step, each line contains the current time, the average temperature on <img class="formulaInl" alt="$\Gamma_4$" src="form_381.png"/> (surface where is the contact between the heat sink and the heat source) and the average temperature on <img class="formulaInl" alt="$\Gamma_1$" src="form_402.png"/>. To analyze this file, we recommend you to work with <code>Octave</code> which is an open-source software similar to <code>Matlab</code>.<br/>
 If it is installed, open a command line and go to <pre class="fragment">~/feel/heatsink/Simplex_'.'.'/0.000'/
</pre> and try : <pre class="fragment">&gt; octave
octave:1&gt; M=load('averages');
octave:2&gt; plot(M(:,1),M(:,2))
octave:3&gt; plot(M(:,1),M(:,3))
octave:4&gt; plot(M(1:70,1),M(1:70,2))
octave:5&gt; plot(M(1:70,1),M(1:70,3))
</pre> The <img class="formulaInl" alt="$ 4^{th}$" src="form_403.png"/> and <img class="formulaInl" alt="$ 5^{th}$" src="form_404.png"/> lines are here to observe the transient state.</li>
</ul>
<h2><a class="anchor" id="Results_How"></a>
How to use it ?</h2>
<p>To make easier the use of this application, we recommand you to use the configurations files. This is the fastest way : to do it, you juste have to create the file <code>heatsink.cfg</code> and place it in the same directory that your application's executable. <br/>
 We have created <img class="formulaInl" alt="$3$" src="form_405.png"/> typical <code>cfg</code> files such as : </p>
<div class="fragment"><div class="line"><span class="preprocessor"># file heatsink_1.cfg</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># spreader and fin in copper</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># 2D simulation</span></div>
<div class="line"><span class="preprocessor"></span>hsize=1e-4</div>
<div class="line"></div>
<div class="line">kappa_s=386 # W/m/K</div>
<div class="line">c_s=385</div>
<div class="line">rho_s=8940</div>
<div class="line"></div>
<div class="line">kappa_f=386 # W/m/K</div>
<div class="line">c_f=385 #J/kg/K</div>
<div class="line">rho_f=8940</div>
<div class="line"></div>
<div class="line">L=15e-3</div>
<div class="line">width=5e-4</div>
<div class="line"></div>
<div class="line">therm_coeff=1000  #W/(m2K)</div>
<div class="line">heat_flux=1e6</div>
<div class="line"></div>
<div class="line">[bdf]</div>
<div class="line">order=2</div>
<div class="line">time-step=0.05</div>
<div class="line">time-<span class="keyword">final</span>=100</div>
<div class="line">steady=0</div>
<div class="line"></div>
<div class="line">[exporter]</div>
<div class="line">format=gmsh</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor"># file heatsink_3.cfg</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># spreader in copper</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># fin in aluminium</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># 3D simulation</span></div>
<div class="line"><span class="preprocessor"></span>hsize=3e-4</div>
<div class="line">kappa_s=386 # W/m/K</div>
<div class="line">c_s=385</div>
<div class="line">rho_s=8940</div>
<div class="line"></div>
<div class="line">kappa_f=386 # W/m/K</div>
<div class="line">c_f=385 #J/kg/K</div>
<div class="line">ho_f=8940</div>
<div class="line"></div>
<div class="line">L=15e-3</div>
<div class="line">width=5e-4</div>
<div class="line">deep=4e-2</div>
<div class="line"></div>
<div class="line">therm_coeff=1000  #W/(m2K)</div>
<div class="line">heat_flux=1e6</div>
<div class="line"></div>
<div class="line">[bdf]</div>
<div class="line">order=2</div>
<div class="line">time-step=0.05</div>
<div class="line">time-<span class="keyword">final</span>=100</div>
<div class="line">steady=0</div>
<div class="line"></div>
<div class="line">[exporter]</div>
<div class="line">format=gmsh</div>
</div><!-- fragment --><p>This file is the only modification you will have to bring to the application, in that way you won't have to compile each time the files (except for <code>heatsink.cpp</code> if you want to increase the order and/or the dimension, in that case you'ill have to modify this parameter at then end of the file in the <code>main</code> method).</p>
<h2><a class="anchor" id="Results_Figures"></a>
Figures</h2>
<h3><a class="anchor" id="Results_2D"></a>
2D cases</h3>
<p>Here are some results of the 2D simulations considering different configurations files. The figures have been extracted thanks to <code><a class="el" href="classFeel_1_1Gmsh.html" title="Gmsh Mesh Generator. ">Gmsh</a></code> and <code>Octave</code> : </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="heatsink_1.png" alt="heatsink_1.png"/>
</div>
  </td></tr>
<tr>
<td><center><code>heatsink_1.cfg</code> : steady state, spreader and fin in copper, <img class="formulaInl" alt="$Q=1e6$" src="form_406.png"/> and <img class="formulaInl" alt="$h=1e3$" src="form_407.png"/></center>  </td></tr>
</table>
</center> <center> <table  border="0px">
<tr>
<td><div class="image">
<img src="heatsink_1_gamma4.png" alt="heatsink_1_gamma4.png"/>
</div>
 </td><td><div class="image">
<img src="heatsink_1_gamma1.png" alt="heatsink_1_gamma1.png"/>
</div>
  </td></tr>
<tr>
<td><center><code>heatsink_1.cfg</code> : transient state on <img class="formulaInl" alt="$\Gamma_4$" src="form_381.png"/></center> </td><td><center><code>heatsink_1.cfg</code> : transient state on <img class="formulaInl" alt="$\Gamma_1$" src="form_402.png"/></center>  </td></tr>
</table>
</center><h3><a class="anchor" id="Results_3D"></a>
3D cases</h3>
<p>Here is the result of 3D simulations considering the following configurations : </p>
<center> <table  border="0px">
<tr>
<td><div class="image">
<img src="heatsink_3.png" alt="heatsink_3.png"/>
</div>
  </td></tr>
<tr>
<td><center><code>heatsink_3.cfg</code> : spreader and fin in copper, <img class="formulaInl" alt="$Q=1e6$" src="form_406.png"/> and <img class="formulaInl" alt="$h=1e3$" src="form_407.png"/></center>  </td></tr>
</table>
</center> <center> <table  border="0px">
<tr>
<td><div class="image">
<img src="heatsink_3_gamma4.png" alt="heatsink_3_gamma4.png"/>
</div>
 </td><td><div class="image">
<img src="heatsink_3_gamma1.png" alt="heatsink_3_gamma1.png"/>
</div>
  </td></tr>
<tr>
<td><center><code>heatsink_3.cfg</code> : transient state on <img class="formulaInl" alt="$\Gamma_4$" src="form_381.png"/></center> </td><td><center><code>heatsink_3.cfg</code> : transient state on <img class="formulaInl" alt="$\Gamma_1$" src="form_402.png"/></center>  </td></tr>
</table>
</center> </div></div><!-- contents -->
</div><!-- doc-content -->
<hr size="1"><address style="text-align: right;"><small>
Generated on Fri Oct 11 2013 00:02:36 for Feel++ by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.4</small></address>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-40726726-1', 'github.io');
  ga('send', 'pageview');
</script>
</body>
</html>
